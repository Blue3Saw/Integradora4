@using BO;
@model TareasBO
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/FrontEnd/MasterPage/_layoutUsuarios.cshtml";
}

<div class="container-fluid">
    <div class="container card">
        <div class="row">
        <div class="col-md-2"></div>
        <h2>Agregar una tarea</h2>

        @using (Ajax.BeginForm("AgregarTarea", "Tareas", new AjaxOptions() { HttpMethod = "POST" }))
        {
            @Html.AntiForgeryToken()
            <div class="col-md-12 bann-info">
                <div class="book-a-ticket">
                    <div class="bann-info">
                        <div class="ban-top">
                            <div class="col-md-4 ">                 
                                <div class="clearfix"></div>
                                <div class="bnr-left">
                                    <label class="inputLabel">Título de la tarea:</label>
                                    <input name="Titulo" class="form-control" type="text" required="required" />
                                </div>
                                <div class="clearfix"></div>
                                <label class="inputLabel">Hora de inicio de la tarea a realizar:</label>
                                <div class="input-group clockpicker" data-autoclose="true">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-time"></span>
                                    </span>
                                    <input name="HoraInicioTarea" class="form-control" id="clockpicker" type="text"  required="required" />
                                </div>

                                <div class="clearfix"></div>
                                <label class="inputLabel">Hora de termino de la tarea a realizar:</label>
                                <div class="input-group clockpicker" data-autoclose="true">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-time"></span>
                                    </span>
                                    <input name="HoraFinTarea" class="form-control" id="clockpicker" type="text"  required="required" />
                                </div>
                                
                                <div class="clearfix"></div>

                            </div>

                        </div>
                        <div class="col-md-4 ">

                            <div class="ban-bottom">
                                <div class="bnr-right">
                                    <label class="inputLabel">Fecha de la tarea a realizar:</label>
                                    <input name="FechaTarea" class="date form-control" type="date" placeholder="dd-mm-yyyy" required="required" />
                                </div>
                            </div>

                            <div class="clearfix"></div>
                            <div class="bnr-left">
                                <label class="control-label">Tipo de tarea:</label>
                                <div>
                                    <div id="cmbClas" required="required"></div>
                                </div>
                            </div>
                            <div class="bnr-left">
                                <label class="control-label">Personas para la tarea:</label>
                                <div>
                                    <div id="cmbPersonas" required="required"></div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="bnr-left">
                                <label class="inputLabel">Descripción:</label>
                                <input name="Descripcion" class="form-control" type="text" required="required" />
                            </div>
                            <div class="clearfix"></div>
                            <button type="button" data-toggle="modal" data-target="#Map" class="btn btn-default">
                                <span class="glyphicon glyphicon-map-marker"></span> <span id="ubicacion">Seleccionar ubicación:</span>
                            </button>

                        </div>
                        <div class="col-md-4">
                            <style>
                                .pac-container {
                                    z-index: 99999;
                                }
                            </style>

                            <div class="container-fluid">
                                <div class="modal-body">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Ubicación:</label>
                                            <div class="col-sm-1"></div>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control" name="Direccion" id="Direccion" />
                                            </div>
                                            <div class="col-sm-1">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            </div>
                                        </div>
                                        <div id="MapPreview" style="width:100%; height:300px;"></div>
                                        <div class="clearfix">&nbsp;</div>
                                        <div class="m-t-small">
                                            <label class="p-r-small col-sm-2 control-label">Lat.:</label>
                                            <div class="col-sm-4">
                                                <input type="text" Class="form-control" name="Latitud" ID="Latitud" />
                                            </div>
                                        </div>
                                        <div>
                                            <label class="p-r-small col-sm-2 control-label">Long.:</label>
                                            <div class="col-sm-4">
                                                <input type="text" Class="form-control" name="Longitud" ID="Longitud" />
                                            </div>
                                        </div>
                                        <div class="clearfix">&nbsp;</div>
                                    </div>
                                    <div class="clearfix"></div>

                                </div>
                            </div>

                        </div>
                        <div class="clearfix">&nbsp;</div>
                        <div class="ban-top">
                            

                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-2">
                                    <div>
                                        <button type="submit" class="btn btn-success" name="agregar" value="1" onclick="alerta()">AGREGAR</button>

                                    </div>
                                </div>
                                <div class="col-md-1"></div>
                                <div class="col-md-2">
                                    <div>
                                        <button type="submit" class="btn btn-info" name="actualizar" value="2">ACTUALIZAR</button>
                                    </div>
                                </div>
                                <div class="col-lg-1"></div>
                                <div class="col-md-2">
                                    <div>
                                        <button type="submit" class="btn btn-danger" name="eliminar" value="3">ELIMINAR</button>
                                    </div>
                                </div>
                                <div class="col-md-2"></div>
                            </div>
                    </div>
                </div>

            </div>
               
                                
    </div>
        }
            
                    @*<button  class="btn btn-success right" data-toggle="modal" data-target="#ModalCalif">Finalizar tarea</button>
                    <div class="modal fade" id="ModalCalif" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-sm modal-dialog">
                            <div class="modal-content">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    &times;
                                </button>
                                <div class="modal-header">Califica</div>
                                <div class="modal-body">
                                    <hr />
                                    Calificar: <div id="Estrellas"></div>
                                </div>
                            </div>
                        </div>
                    </div>*@
                    
                    
               
    </div>       
</div>
    </div>

        <!-- start-date-piker -->
        <script src="~/Recursos/FontEnd/js/clockpicker.js"></script>
        <link rel="stylesheet" href="~/Recursos/FontEnd/css/jquery-ui.css">
        <script src="~/Recursos/FontEnd/js/jquery-ui.js"></script>

<script src="~/Recursos/FontEnd/js/starrr.js"></script>
<link href="~/Recursos/FontEnd/css/starrr.css" rel="stylesheet" />
<script>
    $('#Estrellas').starrr({
        rating: 3,
        change: function (e, valor) {
            alert(valor);
        }

    });
                        //$(function () { $("#Estrellas").starrr() });
                        $(document).ready(function(){
                            $('#ModalCalif').modal('show');
                        });

</script>

        <script>
            $(function () {
                $("#datepicker,#datepicker1").datepicker();
            });
            
          

        </script>
        <script>
            $(function () {
                $('.clockpicker').clockpicker();
            });
        </script>
        <!-- /End-date-piker -->
        <script src="~/Recursos/FontEnd/js/jquery-2.2.3.min.js"></script>
        @*<script src="@Url.Content("~/Recursos/FrontEnd/js/jquery-2.0.3.min.js")" type="text/javascript"></script>*@
        <script type="text/javascript">
            $(document).ready(function () {
                $('#btn1').click(function () {
                    $('#TodasTareas').load('/Tareas/TodasTareas');
                    $('#subirtareas').load('/Tareas/Index');
                })
            })

        </script>

<script type="text/javascript" src='https://maps.google.com/maps/api/js?sensor=false&libraries=places&key=AIzaSyBSXxq36QGkz0tczm7l3soE77raxPCbDb8'></script>
<script src="~/Recursos/FontEnd/js/locationpicker.jquery.js"></script>
<script>

                                $('#MapPreview').locationpicker({
                                    radius: 0,
                                    location: {
                                        latitude: 20.938297181414647,
                                        longitude: -89.61501516379462
                                    },
                                    enableAutocomplete: true,
                                    inputBinding: {
                                        latitudeInput: $('#Latitud'),
                                        longitudeInput: $('#Longitud'),
                                        locationNameInput: $('#Direccion')
                                    },
                                    onchanged: function (currentLocation, radius, isMarkerDropped) {
                                        $('#ubicacion').html($('#Direccion').val())

                                    }

                                })
                                
</script>


        <!-- Llenar combo-->
        <script>
            (function () {
                $("#cmbClas").load("/Tareas/ListarTipoTarea")
            }())

            function valida(e) {
                tecla = (document.all) ? e.keyCode : e.which;

                //Tecla de retroceso para borrar, siempre la permite
                if (tecla == 8) {
                    return true;
                }

                // Patron de entrada, en este caso solo acepta numeros
                patron = /[0-9]/;
                tecla_final = String.fromCharCode(tecla);
                return patron.test(tecla_final);
            }
        </script>

